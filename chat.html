<!DOCTYPE html>
<html>
<head>
  <title>AI Tutor Chat</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- HEADER -->
  <div class="header">
    <img src="logo.jpeg" alt="NextStep Analytics Logo">
    <div class="brand-text">
      <h2>NextStep Analytics</h2>
      <p class="mentor">Mentor: Manya Krishna</p>
    </div>
  </div>

  <!-- CHAT CONTAINER -->
  <div class="chat-container">

    <div class="message tutor">
      üë©‚Äçüè´ Hi! I‚Äôm the AI Tutor from <b>Manya Krishna</b>.  
      Ask me anything about Alteryx, Power BI, Tableau or Excel.
    </div>

    <div id="chatArea"></div>

    <div class="input-area">
      <input type="text" id="userInput" placeholder="Ask your question..." />
      <button onclick="sendMessage()">Send</button>
    </div>

  </div>

  <script>
    async function sendMessage() {
      alert("send button clicked");

      if (!question) return;

      const chat = document.getElementById("chatArea");

      // Student message
      const userMsg = document.createElement("div");
      userMsg.className = "message student";
      userMsg.innerText = question;
      chat.appendChild(userMsg);

      input.value = "";

      try {
        const response = await fetch(
          "https://ai-tutor-chatbot-ne61.onrender.com/chat",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ message: question })
          }
        );

        if (!response.ok) {
          throw new Error("Backend error: " + response.status);
        }

        const data = await response.json();

        const tutorMsg = document.createElement("div");
        tutorMsg.className = "message tutor";
        tutorMsg.innerText = data.reply;
        chat.appendChild(tutorMsg);

      } catch (error) {
        console.error("Chat error:", error);

        const errorMsg = document.createElement("div");
        errorMsg.className = "message tutor";
        errorMsg.innerText = "‚ö†Ô∏è Tutor is waking up. Please try again in 10 seconds.";
        chat.appendChild(errorMsg);
      }
    }
  </script>

</body>
</html>
