<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Tutor | NextStep Analytics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>

  <!-- HEADER -->
  <header class="header">
    <img src="logo.jpeg" alt="NextStep Analytics Logo" class="logo">
    <div class="brand-text">
      <h2>NextStep Analytics</h2>
      <p class="mentor">Mentor: Manya Krishna</p>
    </div>
  </header>

  <!-- HERO SECTION -->
  <section class="hero">
    <div class="hero-text">
      <h1>AI Tutor for Analytics</h1>
      <p>
        Learn Alteryx, Power BI, Tableau & Excel <br>
        Like a student learning from a real teacher
      </p>
    </div>

    <div class="avatars">
      <div class="avatar">
        <img src="tutor.png" alt="Tutor Image">
        <p>Tutor</p>
      </div>
      <div class="avatar">
        <img src="student.png" alt="Student Image">
        <p>Student</p>
      </div>
    </div>
  </section>

  <!-- COURSES SECTION -->
  <section class="courses">
    <h2 class="section-title">What you can learn</h2>
    <div class="cards">
      <div class="card">Alteryx</div>
      <div class="card">Power BI</div>
      <div class="card">Tableau</div>
      <div class="card">Advanced Excel</div>
    </div>
  </section>

  <!-- CHAT CONTAINER (AUTO OPEN) -->
  <section class="chat-section">
    <div class="chat-container">

      <div id="chatArea">
        <div class="message tutor">
          hii üëã Welcome to NextStep Analytics! <br>
          What‚Äôs your name?
        </div>
      </div>

      <div class="input-area">
        <input type="text" id="userInput" placeholder="Type here..." />
        <button onclick="sendMessage()">Send</button>
      </div>

    </div>
  </section>

  <!-- CHAT SCRIPT -->
  <script>
    async function sendMessage() {
      const input = document.getElementById("userInput");
      const question = input.value.trim();
      if (!question) return;

      const chat = document.getElementById("chatArea");

      // Student message
      const userMsg = document.createElement("div");
      userMsg.className = "message student";
      userMsg.innerText = question;
      chat.appendChild(userMsg);

      input.value = "";

      try {
        const response = await fetch(
          "https://ai-tutor-chatbot-ne61.onrender.com/chat",
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ message: question })
          }
        );

        const data = await response.json();

        const tutorMsg = document.createElement("div");
        tutorMsg.className = "message tutor";
        tutorMsg.innerText = data.reply;
        chat.appendChild(tutorMsg);

        chat.scrollTop = chat.scrollHeight;

      } catch (error) {
        const errorMsg = document.createElement("div");
        errorMsg.className = "message tutor";
        errorMsg.innerText = "‚ö†Ô∏è Please wait a few seconds and try again.";
        chat.appendChild(errorMsg);
      }
    }
  </script>

</body>
</html>
